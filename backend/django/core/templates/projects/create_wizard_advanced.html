{% extends "base.html" %}

{% load i18n %}
{% load static %}
{% load render_bundle from webpack_loader %}

{% block head %}
{{ wizard.form.media }}
{{ form.media.css }}
{% endblock %}

{% block content %}
<div class="error-messages">{{ wizard.non_form_errors }}</div>
<div class="row">
  <div class="col-md-8 col-md-offset-2">
    <div class="card">
      <div class="cardface">
        <form action="." method="post" enctype="multipart/form-data">
          {% csrf_token %}
          {{ wizard.management_form }}

            <h1>Advanced Settings</h1>
            <div class="form-group">
              <div class="choose_al_or_not">
              {{ wizard.form.use_active_learning }} Use Active Learning to select data to label
              </div>
              <div id="choose_method_box">
                {% for radio in wizard.form.learning_method %}
                <div class="choose_method" id={{radio.value}}>
                  {{radio}}
                </div>
                {% endfor %}
              </div>
              <div id = "choose_irr_or_not">
                <h2>Inter-rater Reliability (IRR) Options</h2>
                <p>Under IRR, a certain percentage of the data is labeled by
                  multiple coders. The project admin can then examine the
                  consistency of the labels across different coders. The options
                  below allow you to set what percentage of the data is coded
                  multiple times, and how many coders must code data designated
                  for IRR before it is analyzed.
                </p>
                {{ wizard.form.use_irr }} Use Inter-rater Reliability
              </div>
              <div id="IRR_options">
                Percent of batch marked IRR (must be between 0 and 100):{{ wizard.form.percentage_irr }}%
                <br />
                Number of coders needed (minimum of 2): {{ wizard.form.num_users_irr }}
              </div>
            </div>

          <div>
            <button class="btn btn-info" name="wizard_goto_step" type="submit" value="project">1. Info</button>
            <button class="btn btn-info" name="wizard_goto_step" type="submit" value="labels">2. Labels</button>
            <button class="btn btn-info" name="wizard_goto_step" type="submit" value="permissions">3. Permissions</button>
            <input class="btn btn-primary" type="submit" value="Next Step"/>
            <p class="pull-right">Step {{ wizard.steps.step1 }} of {{ wizard.steps.count }}</p>
          </div>
        </form>
      </div>
    </div>
  </div>
</div>
{% endblock %}

{% block scripts_body %}
<script type="text/javascript">
var methods_box = $("div#choose_method_box");
methods_box.show();
var irr_box = $("div#IRR_options");
if($('input#id_advanced-use_irr').prop('checked') == true)
{
  irr_box.show();
}
else {
  irr_box.hide();
}

$('input#id_advanced-use_active_learning').change(function(){
  if ($(this).prop('checked') == true) {
        methods_box.show();
    } else {
        methods_box.hide();
    }
});

$('input#id_advanced-use_irr').change(function(){
  if ($(this).prop('checked') == true) {
        irr_box.show();
    } else {
        irr_box.hide();
    }
});
</script>
{% endblock %}
